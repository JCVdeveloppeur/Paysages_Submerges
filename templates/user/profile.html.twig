{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
<div class="container py-5">
    <h1 class="mb-4">Bienvenue, {{ app.user.email }} !</h1>

    <div class="card mb-4 shadow-sm">
        <div class="card-header fw-bold">Statistiques</div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">Adresse e-mail : {{ app.user.email }}</li>
            <li class="list-group-item">Inscrit depuis le {{ app.user.dateInscription|date('d/m/Y') }}</li>
            <li class="list-group-item">Articles publiés : {{ app.user.articles|length }}</li>
            <li class="list-group-item">Commentaires postés : {{ app.user.commentaires|length }}</li>
            <li class="list-group-item">Likes reçus sur vos articles : {{ totalLikes ?? 0 }}</li>
        </ul>
    </div>

    <div class="card shadow-sm text-center">
        <div class="card-body">
            <h5 class="card-title fw-bold">Contribuer à la communauté</h5>
            <p class="card-text">Partage ton savoir, tes astuces ou une anecdote aquatique 🌊</p>
            <a href="{{ path('article_create') }}" class="btn btn-primary me-2">✍️ Rédiger un article</a>
            <a href="{{ path('app_articles', {'auteur': app.user.id}) }}" class="btn btn-primary">📄 Voir mes articles</a>
        </div>
    </div>

    <div class="mt-4 d-flex justify-content-center gap-3">
        <a href="{{ path('app_change_password') }}" class="btn btn-outline-primary">🔒 Modifier mon mot de passe</a>
        <form method="post" action="{{ path('app_user_delete', {'id': app.user.id}) }}" onsubmit="return confirm('Supprimer ton compte ? 😱');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ app.user.id) }}">
            <button class="btn btn-danger">🗑️ Supprimer mon compte</button>
        </form>
    </div>
</div>
{% endblock %}



