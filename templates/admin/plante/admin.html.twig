{% extends 'admin/layout.html.twig' %}

{% block page_title %}Administration des plantes{% endblock %}
{% block page_heading %}ðŸŒ¿ GÃ©rer les plantes{% endblock %}

{% block content %}

<div class="admin-surface">

  <div class="admin-surface__head">
  <div class="d-flex align-items-center gap-3 flex-wrap">
    <h3 class="mb-0"> Fiches plantes</h3>
    <span class="badge bg-success">{{ nombrePlantes }}</span>
  </div>

  <div class="d-flex align-items-center gap-2 flex-wrap">
    <a href="{{ path('admin_plante_new') }}" class="btn-admin-ajouter">
      <i class="bi bi-plus-circle"></i> Ajouter une plante
    </a>

    <a href="{{ path('admin_dashboard') }}" class="btn btn-outline-light">
      <i class="bi bi-speedometer2"></i> Tableau de bord
    </a>
  </div>
</div>

  <div class="admin-surface__body">

    {% if plantes is empty %}
      <div class="alert alert-warning mb-0">Aucune plante enregistrÃ©e pour le moment.</div>
    {% else %}

      <form method="get" class="d-flex justify-content-end mb-3 gap-2">
        <input type="hidden" name="page" value="1">

        <select name="limit"
                class="form-select form-select-sm admin-select-glass"
                onchange="this.form.submit()">
          <option value="5"  {{ limit == 5 ? 'selected' }}>5</option>
          <option value="10" {{ limit == 10 ? 'selected' }}>10</option>
          <option value="20" {{ limit == 20 ? 'selected' }}>20</option>
        </select>
      </form>

      <div class="table-responsive">
        <table class="table table-hover table-bordered align-middle admin-table-glass">
          <thead>
            <tr>
              <th>#</th>
              <th>Nom</th>
              <th><em>Nom scientifique</em></th>
              <th>Position</th>
              <th>Ã‰clairage</th>
              <th>DifficultÃ©</th>
              <th class="text-end">Actions</th>
            </tr>
          </thead>

          <tbody>
            {% for p in plantes %}
              <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.nomCommun|default('â€”') }}</td>
                <td><em>{{ p.nomScientifique|default('â€”') }}</em></td>
                <td>{{ p.positionAquarium|default('â€”') }}</td>
                <td>{{ p.eclairage|default('â€”') }}</td>
                <td>{{ p.difficulte|default('â€”') }}</td>
                <td class="text-end">
                  {% include 'admin/_actions_row.html.twig' with {
                    edit_path: path('admin_plante_edit', { id: p.id }),
                    delete_path: path('admin_plante_delete', { id: p.id }),
                    csrf_token_id: 'delete' ~ p.id,

                    delete_kind: 'plante',
                    delete_kicker: "Suppression de plante",
                    delete_title: "Supprimer cette plante ?",
                    delete_subtitle: "Cette fiche ne sera plus accessible.",
                    delete_body: "Vous Ãªtes sÃ»r de vouloir supprimer : <strong>" ~ (p.nom|default('cette plante'))|e('html_attr') ~ "</strong> ?"
                  } %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="d-flex justify-content-center mt-4 admin-pagination-glass">
        {{ knp_pagination_render(plantes) }}
      </div>

    {% endif %}

  </div>

</div>

{% endblock %}




